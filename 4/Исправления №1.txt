https://github.com/Cerimp/php1/blob/master/4/gbook/add.php#L9
Что-то я не понял - зачем этот цикл? Переводы строк в конце убираете что-ли?

Да, я убирал лишние переводы строк, но сейчас я переделал так:
function dataBook() {
    return file(__DIR__.'/data.txt', FILE_IGNORE_NEW_LINES);
}

*****************

https://github.com/Cerimp/php1/blob/master/4/gallery/upload.php#L10
А если И ЭТО имя тоже существует? :)

Я много тестировал эту функцию, вроде всегда работает правильно. Сейчас закачал новую картинку с именем 77711.jpg, при том, что уже такое имя существует, также существуют имена: 777111.jpg, 7771111.jpg, 77711111.jpg и так далее ... и в итоге при загрузке файл стал называться 7771111111111.jpg
Или я не туда смотрю ?

Спасибо! 